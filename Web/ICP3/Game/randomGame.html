<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <!-- To import the google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300&display=swap" rel="stylesheet">
    <!-- To import Bootstrap styling -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>Rock Paper Scissors</title>
</head>

<body id="page" style="background-image: none;">
    <div class="container text-center">
        <h1 class="m-2 mt-4">Rock Paper Scissors Game</h1>
        <h2 class="m-2">Beat the computer five times and you will be the victorious</h2>
        <!-- TO display the billboard and the buttons in a bootstrap grid format. -->
        <div class="row mt-5">
            <!-- Billborad for displaying Users points -->
            <div class="col-md-4">
                <h1>User</h1>
                <br>
                <h1 class="mt-5"><span id="user-score">0</span> </h1>
            </div>
            <!-- Button for rock -->
            <div class="col-md-4">
                <div class="col-md-12 text-center mt-5">
                    <img id="rock" src="rock.png" alt="" title="Rock" onclick="Rock()"
                        style="width: 120px; height: 120px; cursor: pointer;">
                </div>
            </div>
            <!-- Billborad for displaying computer points -->
            <div class="col-md-4">
                <h1>Computer</h1>
                <br>
                <h1 class="mt-5"><span id="comp-score">0</span> </h1>
            </div>
        </div>
        <div class="row text-center">
            <div class="col-md-3"></div>
            <!-- Button for paper -->
            <div class="col-md-3">
                <img id="paper" src="pap_1.png" alt="" title="Paper" onclick="Paper()"
                    style="width: 140px; height: 100px; cursor: pointer;">
            </div>
            <!-- Button for scissors -->
            <div class="col-md-3">
                <img id="scissors" src="sci_1.png" alt="" title="Scissors" onclick="Scissors()"
                    style="width: 140px; height: 95px; cursor: pointer;">
            </div>
            <div class="col-md-3"></div>
        </div>
        <!-- To display round winner-->
        <div id="result" style="visibility: hidden;" class="row col-md-12 mt-3">
            <h1><span id="match_1"></span></h1>
        </div>
        <!-- To display match winner and reset button-->
        <div id="match_result" style="visibility: hidden;color: none;" class="row col-md-12">
            <div class="col-md-3"></div>
            <div class="col-md-6">
                <h1><span id="match_output"></span></h1>
                <button class="btn btn-info m-2" onclick="resetGame()">Reset</button>
            </div>
            <div class="col-md-3"></div>
        </div>
    </div>
    <!-- footer for displaying the copyrights -->
    <div class="copyright text-center">
        Created by JVS PAVAN <img src="intangible-asset.png" width="50" height="50" /> 2022
    </div>
    <script>
        let userScore = 0;
        let compScore = 0;
        var userInput;
        var show_match = false;
        var show_result = false;
        var match = "";

        var node = document.getElementById('result');
        var node1 = document.getElementById('match_result');
        var node2 = document.getElementById('page');
        var rock = document.getElementById('rock');
        var paper = document.getElementById('paper');
        var scissors = document.getElementById('scissors');

        // functions called when the user clicks the buttons on the webpage.
        function Rock() {
            userInput = "Rock";
            compInput();
        };

        function Paper() {
            userInput = "Paper";
            compInput();
        };

        function Scissors() {
            userInput = "Scissors";
            compInput();
        };

        function compInput() {
            const compOptions = ["Rock", "Paper", "Scissors"];
            const compInput = compOptions[Math.floor(Math.random() * 3)];

            compareInputs(userInput, compInput);
            updateScore();
            //checking the winner
            if (checkWinner()) {
                rock.disabled = true;
                rock.style = "width: 120px; height: 120px; pointer-events: none";
                paper.disabled = true;
                paper.style = "width: 140px; height: 100px; pointer-events: none";
                scissors.disabled = true;
                scissors.style = "width: 140px; height: 95px; pointer-events: none";
            }
        }

        // To reset the game after the winner is declared.
        function resetGame() {
            userScore = compScore = 0;
            updateScore();
            show_result = true;
            node1.style.visibility = 'hidden';
            node2.style = '';
            rock.disabled = false;
            rock.style = "width: 120px; height: 120px; cursor: pointer;";
            paper.disabled = false;
            paper.style = "width: 140px; height: 100px; cursor: pointer;";
            scissors.disabled = false;
            scissors.style = "width: 140px; height: 95px; cursor: pointer;";
        }


        // To compare the inputs of both user and computer.
        function compareInputs(userInput, compInput) {

            const currentMatch = `${userInput} vs ${compInput}`;
            // To check whether user and computer inputs are same.
            if (userInput == compInput) {
                match = `${currentMatch} is a Tie`;
                return;
            }

            // To check for 'rock' as user input.
            if (userInput == "Rock") {
                if (compInput == "Scissors") {
                    match = `${currentMatch} = You Win`;
                    userScore++;
                } else {
                    match = `${currentMatch} = Computer Wins`;
                    compScore++;
                }
            }
            // To check for 'paper' as user input.
            else if (userInput == "Paper") {
                if (compInput == "Rock") {
                    match = `${currentMatch} = You Win`;
                    userScore++;
                } else {
                    match = `${currentMatch} = Computer Wins`;
                    compScore++;
                }
            }
            // To check for 'scissors' as user input.
            else {
                if (compInput == "Paper") {
                    match = `${currentMatch} = You Win`;
                    userScore++;
                } else {
                    match = `${currentMatch} = Computer Wins`;
                    compScore++;
                }
            }
            show_match = true;
            if (show_match) {
                node.style.visibility = 'visible';
            } else {
                node.style.visibility = 'hidden';
            }
        }

        // To update teh score on the bill-board.
        function updateScore() {
            document.getElementById("user-score").textContent = userScore;
            document.getElementById("comp-score").textContent = compScore;
            document.getElementById("match_1").textContent = String(match);
            console.log(match);
        }

        // To declare the winner of the match.
        function checkWinner() {
            if (userScore == 5 || compScore == 5) {
                document.getElementById("match_output").textContent = String(
                    userScore === 5 ?
                    "User wins the game! Congratulations!" :
                    "Computer wins the game! Try again next time!");
                show_match = false;
                node.style.visibility = 'hidden';
                show_result = true;
                node1.style.visibility = 'visible';
                // To display the congratulations for the User as winner.
                if (userScore == 5) {
                    node1.style.color = '#2ecc71 !important';
                    node2.style =
                        "background-image: url('https://www.pngplay.com/wp-content/uploads/12/Congratulations-Gifs-Transparent-Image.gif');background-repeat: repeat;";
                    console.log(node2.style);
                } else {
                    node1.style.color = '#e74c3c !important';
                }
                return true;
            }
            show_match = true;
            show_result = true;
            node1.style.visibility = 'hidden';
            node2.style = '';
            return false;
        }
    </script>
</body>

</html>